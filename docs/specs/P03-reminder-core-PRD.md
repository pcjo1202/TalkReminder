---
title: Phase 3 — 알람 핵심 PRD
description: 템플릿 CRUD, 알람 생성/편집 (cron 빌더), 대시보드
---

# [P03] 알람 핵심 — PRD

> **작성일**: 2026-02-21
> **상태**: 초안
> **연관 설계**: [서비스 전체 설계](../plans/2026-02-21-service-design.md)
> **선행 Phase**: [P02 채널 연결](./P02-channel-connect-PRD.md)

---

## 1. 배경 및 목적

서비스의 핵심 기능인 알람 생성과 관리를 구현한다.
사용자가 "언제, 어디로, 무엇을 보낼지"를 직관적으로 설정할 수 있어야 한다.
유연한 반복 규칙(cron)을 UI 빌더로 쉽게 설정하고, 대시보드에서 전체 현황을 한눈에 파악한다.

---

## 2. 사용자 스토리

```
As a 사용자,
I want to 재사용 가능한 메시지 템플릿을 만들 수 있도록,
So that 알람마다 메시지를 반복 작성하지 않아도 된다.
```

```
As a 사용자,
I want to 유연한 반복 규칙으로 알람을 생성할 수 있도록,
So that "매주 월·수·금 오전 9시"처럼 세밀하게 스케줄을 설정할 수 있다.
```

```
As a 사용자,
I want to 대시보드에서 모든 알람과 다음 발송 시각을 확인할 수 있도록,
So that 알람 현황을 한눈에 파악하고 관리할 수 있다.
```

**알람 생성 흐름 (Happy Path):**

1. `/reminders/new`에서 제목, 채널, 수신자를 입력한다
2. 스케줄 빌더에서 반복 규칙을 설정한다 (예: 매주 월·수 오전 9시)
3. 메시지를 직접 작성하거나 템플릿을 선택한다
4. "저장" 클릭 시 알람이 생성되고 대시보드로 이동한다
5. 대시보드에 새 알람과 다음 발송 예정 시각이 표시된다

---

## 3. 기능 범위

**포함 (In Scope):**

템플릿:
- [ ] 템플릿 생성/편집/삭제 (`/templates`)
- [ ] 템플릿 변수 지원 (`{{name}}`, `{{date}}`, `{{custom}}`)
- [ ] 템플릿 미리보기 (변수에 샘플 값 치환)

알람:
- [ ] 알람 생성/편집/삭제 (`/reminders/new`, `/reminders/[id]`)
- [ ] 스케줄 빌더 UI → cron 표현식 변환
  - 반복 타입: 매일 / 매주(요일 선택) / 매월(날짜 or 마지막 N요일)
  - 시각: 시·분 선택
  - 타임존: 사용자 기본값 사용
- [ ] 채널 선택 (연결된 채널 중 선택)
- [ ] 수신자 설정
  - Slack: 채널 or DM 선택
  - 카카오: 나에게 or 친구 선택 (최대 5명)
- [ ] 알람 활성/비활성 토글
- [ ] 다음 발송 예정 시각 계산 및 표시

대시보드:
- [ ] 알람 목록 (활성/비활성 필터)
- [ ] 각 알람의 다음 발송 예정 시각 표시
- [ ] 빠른 액션 (편집, 삭제, 활성화 토글)

**제외 (Out of Scope):**
- 조건부 발송 (날씨, 공휴일 등) — v2
- 알람 그룹/카테고리 — v2
- 팀 공유 알람 — Phase 5

---

## 4. 수용 기준 (Acceptance Criteria)

**템플릿:**
- [ ] AC-01: 템플릿 생성 시 `templates` 테이블에 저장된다
- [ ] AC-02: 변수(`{{name}}`)가 포함된 템플릿 미리보기가 샘플 값으로 치환되어 표시된다
- [ ] AC-03: 템플릿 삭제 시 해당 템플릿을 참조하는 알람에 경고가 표시된다

**알람:**
- [ ] AC-04: 알람 저장 시 cron 표현식이 `reminders` 테이블에 저장된다
- [ ] AC-05: "매주 월·수·금 오전 9시" 설정 시 cron `0 9 * * 1,3,5`가 생성된다
- [ ] AC-06: "매월 마지막 금요일" 설정 시 올바른 cron이 생성된다
- [ ] AC-07: 채널이 연결되지 않은 상태에서 알람 생성 시 채널 연결 안내가 표시된다
- [ ] AC-08: 카카오 친구 선택 시 최대 5명까지만 선택 가능하다
- [ ] AC-09: 알람 비활성화 시 n8n 트리거가 동작하지 않는다 (is_active = false)

**대시보드:**
- [ ] AC-10: 대시보드에서 알람 목록과 다음 발송 시각이 표시된다
- [ ] AC-11: 알람이 없을 때 빈 상태 안내가 표시된다

---

## 5. UI/UX 요구사항

**`/templates`:**
- 템플릿 카드 목록 + "새 템플릿" 버튼
- 편집 폼: 이름, 본문(변수 하이라이트), 미리보기 패널
- **빈 상태**: "아직 템플릿이 없습니다. 템플릿을 만들어 메시지를 재사용하세요."

**`/reminders/new` & `/reminders/[id]`:**
- 제목 입력
- 스케줄 빌더: 탭 형식 (매일 / 매주 / 매월)
- 채널 + 수신자 선택 섹션
- 메시지 섹션: 직접 입력 or 템플릿 선택
- **에러**: 필수 항목 미입력 시 인라인 에러 표시

**`/dashboard`:**
- 알람 카드 목록 (다음 발송 시각 기준 오름차순)
- 각 카드: 제목, 채널 아이콘, 다음 발송 시각, 활성 토글, 편집/삭제 버튼
- **빈 상태**: "알람이 없습니다. 첫 알람을 만들어보세요." + 생성 버튼

---

## 6. 미결 사항 (Open Questions)

| 질문 | 담당 | 기한 |
|------|------|------|
| reminder가 template_id를 참조할지, 메시지 body를 복사할지 확정 필요 | - | Phase 3 시작 전 |
| "매월 마지막 금요일" 같은 복잡한 규칙을 cron으로 표현할지, 별도 필드로 저장할지 | - | Phase 3 시작 전 |
| 타임존 기본값 (Asia/Seoul 고정 vs 사용자 선택) | - | Phase 3 시작 전 |
